var cov_wkhn9034l=function(){var path="/Users/desimiramitkova/Projects/etherlime/logs-store/logs-store.js";var hash="1c88d8995e429c73ff38bbc6ff59c0facf56bdf6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/desimiramitkova/Projects/etherlime/logs-store/logs-store.js",statementMap:{"0":{start:{line:1,column:24},end:{line:1,column:56}},"1":{start:{line:3,column:19},end:{line:3,column:39}},"2":{start:{line:12,column:2},end:{line:12,column:72}},"3":{start:{line:14,column:18},end:{line:14,column:35}},"4":{start:{line:15,column:2},end:{line:15,column:41}},"5":{start:{line:16,column:2},end:{line:16,column:25}},"6":{start:{line:23,column:2},end:{line:25,column:3}},"7":{start:{line:24,column:3},end:{line:24,column:10}},"8":{start:{line:26,column:24},end:{line:28,column:3}},"9":{start:{line:29,column:2},end:{line:29,column:57}},"10":{start:{line:30,column:2},end:{line:30,column:24}},"11":{start:{line:31,column:2},end:{line:31,column:8}},"12":{start:{line:38,column:2},end:{line:38,column:35}},"13":{start:{line:45,column:2},end:{line:45,column:50}},"14":{start:{line:52,column:18},end:{line:52,column:35}},"15":{start:{line:53,column:2},end:{line:53,column:59}},"16":{start:{line:68,column:2},end:{line:70,column:3}},"17":{start:{line:69,column:3},end:{line:69,column:10}},"18":{start:{line:72,column:14},end:{line:72,column:24}},"19":{start:{line:73,column:17},end:{line:83,column:3}},"20":{start:{line:85,column:24},end:{line:85,column:54}},"21":{start:{line:86,column:2},end:{line:86,column:37}},"22":{start:{line:87,column:2},end:{line:87,column:58}},"23":{start:{line:97,column:2},end:{line:97,column:9}},"24":{start:{line:101,column:2},end:{line:101,column:9}},"25":{start:{line:105,column:2},end:{line:105,column:9}},"26":{start:{line:109,column:2},end:{line:109,column:9}},"27":{start:{line:113,column:2},end:{line:113,column:9}},"28":{start:{line:118,column:0},end:{line:122,column:1}},"29":{start:{line:119,column:1},end:{line:119,column:25}},"30":{start:{line:121,column:1},end:{line:121,column:41}},"31":{start:{line:124,column:0},end:{line:124,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:1},end:{line:11,column:2}},loc:{start:{line:11,column:15},end:{line:17,column:2}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:1},end:{line:22,column:2}},loc:{start:{line:22,column:21},end:{line:32,column:2}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:37,column:1},end:{line:37,column:2}},loc:{start:{line:37,column:14},end:{line:39,column:2}},line:37},"3":{name:"(anonymous_3)",decl:{start:{line:44,column:1},end:{line:44,column:2}},loc:{start:{line:44,column:27},end:{line:46,column:2}},line:44},"4":{name:"(anonymous_4)",decl:{start:{line:51,column:1},end:{line:51,column:2}},loc:{start:{line:51,column:24},end:{line:54,column:2}},line:51},"5":{name:"(anonymous_5)",decl:{start:{line:67,column:1},end:{line:67,column:2}},loc:{start:{line:67,column:101},end:{line:89,column:2}},line:67},"6":{name:"(anonymous_6)",decl:{start:{line:94,column:1},end:{line:94,column:2}},loc:{start:{line:94,column:15},end:{line:95,column:2}},line:94},"7":{name:"(anonymous_7)",decl:{start:{line:96,column:1},end:{line:96,column:2}},loc:{start:{line:96,column:21},end:{line:98,column:2}},line:96},"8":{name:"(anonymous_8)",decl:{start:{line:100,column:1},end:{line:100,column:2}},loc:{start:{line:100,column:14},end:{line:102,column:2}},line:100},"9":{name:"(anonymous_9)",decl:{start:{line:104,column:1},end:{line:104,column:2}},loc:{start:{line:104,column:27},end:{line:106,column:2}},line:104},"10":{name:"(anonymous_10)",decl:{start:{line:108,column:1},end:{line:108,column:2}},loc:{start:{line:108,column:24},end:{line:110,column:2}},line:108},"11":{name:"(anonymous_11)",decl:{start:{line:112,column:1},end:{line:112,column:2}},loc:{start:{line:112,column:101},end:{line:115,column:2}},line:112}},branchMap:{"0":{loc:{start:{line:23,column:2},end:{line:25,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:25,column:3}},{start:{line:23,column:2},end:{line:25,column:3}}],line:23},"1":{loc:{start:{line:68,column:2},end:{line:70,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:70,column:3}},{start:{line:68,column:2},end:{line:70,column:3}}],line:68},"2":{loc:{start:{line:118,column:0},end:{line:122,column:1}},type:"if",locations:[{start:{line:118,column:0},end:{line:122,column:1}},{start:{line:118,column:0},end:{line:122,column:1}}],line:118}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"1c88d8995e429c73ff38bbc6ff59c0facf56bdf6"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var BlockingJSONStore=(cov_wkhn9034l.s[0]++,require('./blocking-json-store'));const storageDir=(cov_wkhn9034l.s[1]++,'./.etherlime-store');let store;/**
 * Store for the logs created by the deployment scripts.
 */class LogsStore{constructor(){cov_wkhn9034l.f[0]++;cov_wkhn9034l.s[2]++;this._historyStore=BlockingJSONStore(`${storageDir}/.history.json`);const history=(cov_wkhn9034l.s[3]++,this.getHistory());cov_wkhn9034l.s[4]++;this._HISTORY_ID=''+history.length;cov_wkhn9034l.s[5]++;this.isInitied=false;}/**
	 * Initializes the history store with default empty array value
	 */initHistoryRecord(){cov_wkhn9034l.f[1]++;cov_wkhn9034l.s[6]++;if(this.isInitied){cov_wkhn9034l.b[0][0]++;cov_wkhn9034l.s[7]++;return;}else{cov_wkhn9034l.b[0][1]++;}const initialRecord=(cov_wkhn9034l.s[8]++,{actions:new Array()});cov_wkhn9034l.s[9]++;this._historyStore.set(this._HISTORY_ID,initialRecord);cov_wkhn9034l.s[10]++;this.isInitied=true;cov_wkhn9034l.s[11]++;return;}/**
	 * Gets all stored historical records of deployments
	 */getHistory(){cov_wkhn9034l.f[2]++;cov_wkhn9034l.s[12]++;return this._historyStore.list();}/**
	 * Gets the record that logAction is going to be writing at.
	 */getCurrentWorkingRecord(){cov_wkhn9034l.f[3]++;cov_wkhn9034l.s[13]++;return this._historyStore.get(this._HISTORY_ID);}/**
	 * Gets the last written record.
	 */getLastWorkingRecord(){cov_wkhn9034l.f[4]++;const history=(cov_wkhn9034l.s[14]++,this.getHistory());cov_wkhn9034l.s[15]++;return this._historyStore.get(''+(history.length-1));}/**
	 * 
	 * Add a record to the history of deployments
	 * 
	 * @param {*} deployerType type of deployer
	 * @param {*} nameOrLabel name of the contract or label of the transaction
	 * @param {*} transactionHash transaction hash if available
	 * @param {*} status 0 - success, 1 - failure
	 * @param {*} networkID id of the network
	 * @param {*} result arbitrary result text
	 */logAction(deployerType,nameOrLabel,transactionHash,status,gasPrice,gasUsed,networkID,result){cov_wkhn9034l.f[5]++;cov_wkhn9034l.s[16]++;if(!this.isInitied){cov_wkhn9034l.b[1][0]++;cov_wkhn9034l.s[17]++;return;}else{cov_wkhn9034l.b[1][1]++;}const now=(cov_wkhn9034l.s[18]++,Date.now());const record=(cov_wkhn9034l.s[19]++,{eventTimestamp:now,deployerType,nameOrLabel,transactionHash,status,gasPrice,gasUsed,networkID,result});const currentRecord=(cov_wkhn9034l.s[20]++,this.getCurrentWorkingRecord());cov_wkhn9034l.s[21]++;currentRecord.actions.push(record);cov_wkhn9034l.s[22]++;this._historyStore.set(this._HISTORY_ID,currentRecord);}}class WindowCompatibleLogsStore{constructor(){cov_wkhn9034l.f[6]++;}initHistoryRecord(){cov_wkhn9034l.f[7]++;cov_wkhn9034l.s[23]++;return;}getHistory(){cov_wkhn9034l.f[8]++;cov_wkhn9034l.s[24]++;return;}getCurrentWorkingRecord(){cov_wkhn9034l.f[9]++;cov_wkhn9034l.s[25]++;return;}getLastWorkingRecord(){cov_wkhn9034l.f[10]++;cov_wkhn9034l.s[26]++;return;}logAction(deployerType,nameOrLabel,transactionHash,status,gasPrice,gasUsed,networkID,result){cov_wkhn9034l.f[11]++;cov_wkhn9034l.s[27]++;return;}}cov_wkhn9034l.s[28]++;if(typeof window==='undefined'){cov_wkhn9034l.b[2][0]++;cov_wkhn9034l.s[29]++;store=new LogsStore();}else{cov_wkhn9034l.b[2][1]++;cov_wkhn9034l.s[30]++;store=new WindowCompatibleLogsStore();}cov_wkhn9034l.s[31]++;module.exports=store;